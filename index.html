<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n - Educaci√≥n Parvularia</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Sistema de Gesti√≥n Pedag√≥gica - Nivel Transici√≥n</h1>
            <div class="user-info">
                <span>üë§ Usuario Maestro</span>
            </div>
        </header>

        <!-- Barra de Herramientas: Control de Memoria -->
        <section class="toolbar">
            <div class="toolbar-section">
                <h3 class="toolbar-title">üíæ Control de Memoria</h3>
                <p class="toolbar-description">Los datos se guardan autom√°ticamente en tu navegador</p>
            </div>
            <div class="toolbar-actions">
                <button class="btn btn-outline btn-sm" id="export-data-btn" onclick="exportData()" title="Descargar respaldo de datos">
                    üì§ Exportar
                </button>
                <button class="btn btn-outline btn-sm" id="import-data-btn" onclick="importData()" title="Restaurar datos desde archivo">
                    üì• Importar
                </button>
                <button class="btn btn-destructive btn-sm" id="clear-memory-btn" onclick="clearStorage()" title="Borrar todos los datos guardados">
                    üóëÔ∏è Borrar Memoria
                </button>
            </div>
        </section>

        <!-- Selector de A√±o y Semestre -->
        <section class="year-selector">
            <div class="selector-group">
                <label for="year-select">A√±o:</label>
                <select id="year-select" aria-label="Seleccionar a√±o acad√©mico">
                    <option value="2024">2024</option>
                    <option value="2025" selected>2025</option>
                    <option value="2026">2026</option>
                </select>

                <label for="semester-select">Semestre:</label>
                <select id="semester-select" aria-label="Seleccionar semestre">
                    <option value="1" selected>Primer Semestre</option>
                    <option value="2">Segundo Semestre</option>
                </select>
            </div>
        </section>

        <!-- Unidades Pedag√≥gicas -->
        <section class="pedagogical-units">
            <h2>Unidades Pedag√≥gicas</h2>

            <!-- Skeleton loader (se muestra mientras carga) -->
            <div id="units-skeleton" style="display:none;" class="units-container">
                <div class="skeleton skeleton-card"></div>
                <div class="skeleton skeleton-card"></div>
                <div class="skeleton skeleton-card"></div>
            </div>

            <!-- Container de unidades -->
            <div class="units-container" id="units-container">
                <!-- Las unidades se cargar√°n din√°micamente -->
            </div>

            <button class="btn btn-primary" id="add-unit-btn" aria-label="Agregar nueva unidad pedag√≥gica">+ Agregar Unidad Pedag√≥gica</button>
        </section>

        <!-- Navegaci√≥n de Tabs -->
        <nav class="tabs-nav" role="tablist">
            <button class="tab-btn active" data-tab="objetivos" role="tab" aria-selected="true">Objetivos de Aprendizaje</button>
            <button class="tab-btn" data-tab="experiencias" role="tab" aria-selected="false">Experiencias de Aprendizaje</button>
            <button class="tab-btn" data-tab="recursos" role="tab" aria-selected="false">Gu√≠as y Recursos</button>
            <button class="tab-btn" data-tab="planificacion" role="tab" aria-selected="false">Planificaci√≥n</button>
            <button class="tab-btn" data-tab="registro" role="tab" aria-selected="false">Registro de Indicadores</button>
            <button class="tab-btn" data-tab="reportes" role="tab" aria-selected="false">Reportes</button>
        </nav>

        <!-- Tab: Objetivos de Aprendizaje CON STEPPER -->
        <section class="tab-content active" id="tab-objetivos" role="tabpanel">
            <div class="content-section">
                <h2>Gesti√≥n de Objetivos de Aprendizaje</h2>

                <!-- Alert informativo -->
                <div class="alert alert-info">
                    <div class="alert-icon">‚ÑπÔ∏è</div>
                    <div class="alert-content">
                        <div class="alert-title">Crear Objetivos Pedag√≥gicos</div>
                        <div class="alert-description">Los objetivos de aprendizaje son la base de tu planificaci√≥n pedag√≥gica. Sigue los pasos del asistente para crear objetivos alineados con las Bases Curriculares 2019.</div>
                    </div>
                </div>

                <!-- Stepper para guiar el flujo -->
                <div class="stepper" id="objectives-stepper">
                    <div class="stepper-step active" data-step="1">
                        <div class="stepper-step-content">
                            <div class="stepper-number">1</div>
                            <div class="stepper-label">√Åmbito y N√∫cleo</div>
                        </div>
                    </div>
                    <div class="stepper-step" data-step="2">
                        <div class="stepper-step-content">
                            <div class="stepper-number">2</div>
                            <div class="stepper-label">Objetivos (OA)</div>
                        </div>
                    </div>
                    <div class="stepper-step" data-step="3">
                        <div class="stepper-step-content">
                            <div class="stepper-number">3</div>
                            <div class="stepper-label">OAT del N√∫cleo</div>
                        </div>
                    </div>
                    <div class="stepper-step" data-step="4">
                        <div class="stepper-step-content">
                            <div class="stepper-number">4</div>
                            <div class="stepper-label">Objetivo Espec√≠fico</div>
                        </div>
                    </div>
                    <div class="stepper-step" data-step="5">
                        <div class="stepper-step-content">
                            <div class="stepper-number">5</div>
                            <div class="stepper-label">Revisi√≥n</div>
                        </div>
                    </div>
                </div>

                <!-- Paso 1: Selector de √Åmbito y N√∫cleo -->
                <div class="objective-step" id="step-1" style="display:block;">
                    <h3>Paso 1: Seleccionar √Åmbito y N√∫cleo</h3>

                    <div class="form-field">
                        <label for="ambito-select">
                            √Åmbito de Aprendizaje <span class="required">*</span>
                            <span class="tooltip-trigger">
                                <span class="tooltip-icon" aria-label="Ayuda sobre √°mbitos">?</span>
                                <span class="tooltip">Los √°mbitos agrupan los n√∫cleos de aprendizaje seg√∫n las Bases Curriculares 2019</span>
                            </span>
                        </label>
                        <select id="ambito-select">
                            <option value="">Seleccione un √°mbito...</option>
                            <option value="desarrollo">Desarrollo Personal y Social</option>
                            <option value="comunicacion">Comunicaci√≥n Integral</option>
                            <option value="interaccion">Interacci√≥n y Comprensi√≥n del Entorno</option>
                        </select>
                        <div class="form-field-message form-field-helper">
                            Seleccione el √°mbito que desea trabajar
                        </div>
                    </div>

                    <div class="form-field">
                        <label for="nucleo-select">
                            N√∫cleo de Aprendizaje <span class="required">*</span>
                        </label>
                        <select id="nucleo-select" disabled>
                            <option value="">Seleccione un n√∫cleo...</option>
                        </select>
                    </div>
                </div>

                <!-- Paso 2: Objetivos de Aprendizaje (OA) -->
                <div class="objective-step" id="step-2" style="display:none;">
                    <h3>Paso 2: Seleccionar Objetivos de Aprendizaje (OA)</h3>

                    <div class="alert alert-info">
                        <div class="alert-icon">üí°</div>
                        <div class="alert-content">
                            <div class="alert-description">Seleccione entre 1 y 2 Objetivos de Aprendizaje que trabajar√° en esta unidad. Puede agregar un tercero opcional en el paso 4.</div>
                        </div>
                    </div>

                    <div id="oa-section">
                        <div id="oa-list" class="checkbox-list"></div>
                    </div>
                </div>

                <!-- Paso 3: Objetivos Transversales (OAT) -->
                <div class="objective-step" id="step-3" style="display:none;">
                    <h3>Paso 3: Seleccionar Objetivos Transversales (OAT)</h3>

                    <div class="alert alert-warning">
                        <div class="alert-icon">‚ö°</div>
                        <div class="alert-content">
                            <div class="alert-title">OAT Espec√≠ficos del N√∫cleo</div>
                            <div class="alert-description">Los OAT mostrados est√°n asociados al n√∫cleo seleccionado y promueven actitudes y valores fundamentales.</div>
                        </div>
                    </div>

                    <div id="oat-section">
                        <div id="oat-list" class="checkbox-list"></div>
                    </div>
                </div>

                <!-- Paso 4: Objetivo Espec√≠fico + Indicadores + Tercer OA Opcional -->
                <div class="objective-step" id="step-4" style="display:none;">
                    <h3>Paso 4: Crear Objetivo Espec√≠fico e Indicadores</h3>

                    <div class="form-field">
                        <label for="specific-objective-text">
                            Objetivo Espec√≠fico <span class="required">*</span>
                            <span class="tooltip-trigger">
                                <span class="tooltip-icon">?</span>
                                <span class="tooltip">El objetivo espec√≠fico nace de la relaci√≥n entre los OA y OAT seleccionados</span>
                            </span>
                        </label>
                        <textarea id="specific-objective-text" placeholder="Escriba aqu√≠ el objetivo espec√≠fico que desarrollar√° con los estudiantes..."></textarea>
                        <div class="form-field-message form-field-helper">
                            Escriba un objetivo claro y medible para esta unidad
                        </div>
                    </div>

                    <!-- Tercer Objetivo Opcional -->
                    <div class="objetivo-adicional">
                        <h4>‚ûï Objetivo Adicional (Opcional)</h4>
                        <p class="help-text">Puede agregar un tercer objetivo de aprendizaje si lo considera necesario.</p>
                        <div class="form-field">
                            <label for="tercer-oa-select">Tercer OA (Opcional):</label>
                            <select id="tercer-oa-select">
                                <option value="">Ninguno</option>
                            </select>
                        </div>
                    </div>

                    <!-- Indicadores -->
                    <div id="indicators-section" style="display:none;">
                        <h4>Indicadores de Evaluaci√≥n (KPI)</h4>
                        <p class="help-text">Seleccione o modifique los indicadores sugeridos:</p>
                        <div id="indicators-list"></div>
                        <button class="btn btn-secondary" id="add-indicator-btn">+ Agregar Indicador Personalizado</button>
                    </div>
                </div>

                <!-- Paso 5: Revisi√≥n y Guardado -->
                <div class="objective-step" id="step-5" style="display:none;">
                    <h3>Paso 5: Revisi√≥n Final</h3>

                    <div class="alert alert-success">
                        <div class="alert-icon">‚úì</div>
                        <div class="alert-content">
                            <div class="alert-title">¬°Listo para guardar!</div>
                            <div class="alert-description">Revise el resumen de su objetivo antes de guardarlo.</div>
                        </div>
                    </div>

                    <div id="objective-summary" class="card">
                        <!-- El resumen se generar√° din√°micamente -->
                    </div>
                </div>

                <!-- Navegaci√≥n del Stepper -->
                <div class="stepper-navigation">
                    <button class="btn btn-ghost" id="prev-step-btn" style="display:none;">‚Üê Anterior</button>
                    <div style="flex: 1;"></div>
                    <button class="btn btn-secondary" id="cancel-objective-btn">Cancelar</button>
                    <button class="btn btn-primary" id="next-step-btn">Siguiente ‚Üí</button>
                    <button class="btn btn-success" id="save-objective-btn" style="display:none;">Guardar Objetivo</button>
                </div>

                <!-- Objetivos Guardados -->
                <div class="saved-objectives">
                    <h3>Objetivos Guardados en Unidades</h3>
                    <div id="saved-objectives-list">
                        <!-- Empty state por defecto -->
                        <div class="empty-state">
                            <div class="empty-state-icon">üéØ</div>
                            <h3>A√∫n no hay objetivos creados</h3>
                            <p>Los objetivos de aprendizaje son la base de tu planificaci√≥n pedag√≥gica. Usa el asistente arriba para crear tu primer objetivo.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Experiencias de Aprendizaje -->
        <section class="tab-content" id="tab-experiencias" role="tabpanel">
            <div class="content-section">
                <h2>Experiencias de Aprendizaje</h2>

                <div class="alert alert-info">
                    <div class="alert-icon">üìö</div>
                    <div class="alert-content">
                        <div class="alert-title">Dise√±ar Experiencias de Aprendizaje</div>
                        <div class="alert-description">Dise√±e experiencias de aprendizaje estructuradas en tres fases: Inicio, Desarrollo y Cierre. Puede cargar experiencias del banco o crear las suyas propias.</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="objective-for-experience">Objetivo Asociado:</label>
                    <select id="objective-for-experience">
                        <option value="">Seleccione un objetivo guardado...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="experience-unit">Unidad Pedag√≥gica:</label>
                    <select id="experience-unit">
                        <option value="">Seleccione una unidad...</option>
                    </select>
                </div>

                <div class="experience-creator">
                    <h3>Dise√±o de la Experiencia</h3>

                    <!-- Banco de Experiencias -->
                    <div class="bank-selector">
                        <button class="btn btn-outline" id="load-from-bank-btn">üìö Cargar desde Banco de Experiencias</button>
                    </div>

                    <!-- Inicio -->
                    <div class="experience-phase">
                        <h4>Inicio</h4>
                        <textarea id="experience-inicio" placeholder="Describa las actividades de inicio para motivar y activar conocimientos previos..."></textarea>
                    </div>

                    <!-- Desarrollo -->
                    <div class="experience-phase">
                        <h4>Desarrollo</h4>
                        <textarea id="experience-desarrollo" placeholder="Describa las actividades principales donde los estudiantes exploran y construyen aprendizajes..."></textarea>
                    </div>

                    <!-- Cierre -->
                    <div class="experience-phase">
                        <h4>Cierre</h4>
                        <textarea id="experience-cierre" placeholder="Describa las actividades de cierre para consolidar y reflexionar sobre lo aprendido..."></textarea>
                    </div>

                    <!-- Materiales y Recursos -->
                    <div class="materiales-section">
                        <h4>üì¶ Materiales y Recursos Necesarios</h4>
                        <div id="materiales-list">
                            <p class="help-text">No hay materiales agregados.</p>
                        </div>
                        <button class="btn btn-secondary" id="add-material-btn">+ Agregar Material</button>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-ghost" id="clear-experience-btn">Limpiar</button>
                        <button class="btn btn-success" id="save-experience-btn">Guardar Experiencia</button>
                    </div>
                </div>

                <!-- Experiencias Guardadas -->
                <div class="saved-experiences">
                    <h3>Experiencias Guardadas</h3>
                    <div id="saved-experiences-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">üìù</div>
                            <h3>No hay experiencias creadas</h3>
                            <p>Dise√±e experiencias de aprendizaje significativas para sus estudiantes.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Gu√≠as y Recursos -->
        <section class="tab-content" id="tab-recursos" role="tabpanel">
            <div class="content-section">
                <h2>Gu√≠as y Recursos Pedag√≥gicos</h2>

                <div class="file-upload-section">
                    <h3>Subir Nuevo Recurso</h3>
                    <div class="file-upload-area" id="file-upload-area">
                        <p>üìÅ Arrastra archivos aqu√≠ o haz clic para seleccionar</p>
                        <p class="help-text">Formatos soportados: PDF, DOCX, PPTX, im√°genes</p>
                        <input type="file" id="file-input" style="display:none" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.jpg,.jpeg,.png">
                    </div>

                    <div class="form-field">
                        <label for="recurso-nombre">Nombre del Recurso <span class="required">*</span></label>
                        <input type="text" id="recurso-nombre" placeholder="Ej: Gu√≠a de trabajo - Los animales">
                    </div>

                    <div class="form-field">
                        <label for="recurso-descripcion">Descripci√≥n</label>
                        <textarea id="recurso-descripcion" placeholder="Breve descripci√≥n del recurso..."></textarea>
                    </div>

                    <div class="form-field">
                        <label for="recurso-unidad">Unidad Asociada</label>
                        <select id="recurso-unidad">
                            <option value="">Ninguna (recurso general)</option>
                        </select>
                    </div>

                    <button class="btn btn-success" id="save-recurso-btn">Guardar Recurso</button>
                </div>

                <!-- Recursos Guardados -->
                <div class="saved-resources">
                    <h3>Recursos Guardados</h3>
                    <div id="saved-recursos-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">üìÇ</div>
                            <h3>No hay recursos guardados</h3>
                            <p>Suba gu√≠as, presentaciones y material pedag√≥gico para tenerlo organizado.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Planificaci√≥n -->
        <section class="tab-content" id="tab-planificacion" role="tabpanel">
            <div class="content-section">
                <h2>Planificaci√≥n Pedag√≥gica</h2>

                <div class="form-group">
                    <label for="planificacion-unit">Unidad Pedag√≥gica:</label>
                    <select id="planificacion-unit">
                        <option value="">Seleccione una unidad...</option>
                    </select>
                </div>

                <button class="btn btn-primary" id="generar-planificacion-btn">Generar Planificaci√≥n</button>

                <div class="planificacion-container" id="planificacion-container" style="display:none;">
                    <!-- Planificaci√≥n Mensual -->
                    <div class="planificacion-mensual">
                        <h3>üìÖ Planificaci√≥n Mensual</h3>
                        <div class="planificacion-grid" id="planificacion-mensual-grid"></div>
                    </div>

                    <!-- Planificaci√≥n Semanal -->
                    <div class="planificacion-semanal">
                        <h3>üìÜ Planificaci√≥n Semanal</h3>
                        <div class="planificacion-grid" id="planificacion-semanal-grid"></div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-ghost" id="save-planificacion-btn">Guardar Planificaci√≥n</button>
                        <button class="btn btn-outline" id="export-planificacion-btn">Exportar a PDF</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Registro de Indicadores -->
        <section class="tab-content" id="tab-registro" role="tabpanel">
            <div class="content-section">
                <h2>Registro de Indicadores por Estudiante</h2>

                <div class="form-group">
                    <label for="registro-unit">Unidad Pedag√≥gica:</label>
                    <select id="registro-unit">
                        <option value="">Seleccione una unidad...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="registro-objective">Objetivo:</label>
                    <select id="registro-objective">
                        <option value="">Seleccione un objetivo...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="registro-indicator">Indicador:</label>
                    <select id="registro-indicator">
                        <option value="">Seleccione un indicador...</option>
                    </select>
                </div>

                <!-- Tabla de Registro -->
                <div class="registro-table" id="registro-table-container" style="display:none;">
                    <h3>Evaluaci√≥n de Estudiantes</h3>
                    <table id="registro-table">
                        <thead>
                            <tr>
                                <th>N¬∞</th>
                                <th>Nombre del Estudiante</th>
                                <th>Evaluaci√≥n</th>
                                <th>Observaciones</th>
                            </tr>
                        </thead>
                        <tbody id="registro-tbody">
                        </tbody>
                    </table>
                    <div class="action-buttons">
                        <button class="btn btn-success" id="save-registro-btn">Guardar Evaluaciones</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tab: Reportes -->
        <section class="tab-content" id="tab-reportes" role="tabpanel">
            <div class="content-section">
                <h2>Reportes de Desempe√±o</h2>

                <div class="report-selector">
                    <button class="btn btn-primary report-type-btn active" data-report="curso">Reporte por Curso</button>
                    <button class="btn btn-primary report-type-btn" data-report="estudiante">Reporte por Estudiante</button>
                    <button class="btn btn-primary report-type-btn" data-report="semestre">Reporte Semestral</button>
                    <button class="btn btn-primary report-type-btn" data-report="docente">Reporte Administrativo</button>
                </div>

                <!-- Reporte por Curso -->
                <div class="report-content active" id="report-curso">
                    <h3>Desempe√±o General del Curso</h3>
                    <div class="form-group">
                        <label for="report-curso-unit">Unidad Pedag√≥gica:</label>
                        <select id="report-curso-unit">
                            <option value="">Todas las unidades</option>
                        </select>
                    </div>
                    <div id="curso-stats" class="stats-container"></div>
                    <div id="curso-chart" class="chart-container"></div>
                </div>

                <!-- Reporte por Estudiante -->
                <div class="report-content" id="report-estudiante">
                    <h3>Desempe√±o Individual del Estudiante</h3>
                    <div class="form-group">
                        <label for="report-student-select">Estudiante:</label>
                        <select id="report-student-select">
                            <option value="">Seleccione un estudiante...</option>
                        </select>
                    </div>
                    <div id="estudiante-stats" class="stats-container"></div>
                    <div id="estudiante-chart" class="chart-container"></div>
                </div>

                <!-- Reporte Semestral -->
                <div class="report-content" id="report-semestre">
                    <h3>Reporte Semestral de Objetivos</h3>
                    <div class="form-group">
                        <label for="report-semestre-select">Semestre:</label>
                        <select id="report-semestre-select">
                            <option value="1">Primer Semestre</option>
                            <option value="2">Segundo Semestre</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="generar-reporte-semestre-btn">Generar Reporte</button>
                    <div id="semestre-report-content"></div>
                </div>

                <!-- Reporte Administrativo -->
                <div class="report-content" id="report-docente">
                    <h3>Reporte Administrativo - Vista Docente</h3>
                    <div id="docente-stats" class="stats-container"></div>
                    <div id="docente-details"></div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal: Banco de Experiencias -->
    <div id="bank-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Banco de Experiencias de Aprendizaje</h2>
                <span class="close" aria-label="Cerrar modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="bank-nucleo-filter">Filtrar por N√∫cleo:</label>
                    <select id="bank-nucleo-filter">
                        <option value="">Todos los n√∫cleos</option>
                    </select>
                </div>
                <div id="bank-experiences-list"></div>
            </div>
        </div>
    </div>

    <!-- Modal: Agregar Unidad -->
    <div id="unit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Agregar Unidad Pedag√≥gica</h2>
                <span class="close" aria-label="Cerrar modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-field">
                    <label for="unit-name">Nombre de la Unidad <span class="required">*</span></label>
                    <input type="text" id="unit-name" placeholder="Ej: Los seres vivos">
                    <div class="form-field-message" id="unit-name-error" style="display:none;"></div>
                </div>
                <div class="form-field">
                    <label for="unit-description">Descripci√≥n</label>
                    <textarea id="unit-description" placeholder="Descripci√≥n breve de la unidad..."></textarea>
                </div>
                <div class="date-input-group">
                    <div>
                        <label for="unit-fecha-inicio">Fecha de Inicio:</label>
                        <input type="date" id="unit-fecha-inicio">
                    </div>
                    <div>
                        <label for="unit-fecha-fin">Fecha de Fin:</label>
                        <input type="date" id="unit-fecha-fin">
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-ghost close">Cancelar</button>
                    <button class="btn btn-success" id="save-unit-btn">Guardar Unidad</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Ver Efem√©rides -->
    <div id="efemerides-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Efem√©rides de la Unidad</h2>
                <span class="close" aria-label="Cerrar modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="efemerides-content"></div>
            </div>
        </div>
    </div>

    <!-- Toast Container (para notificaciones) -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
